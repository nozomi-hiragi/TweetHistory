# ゴミ箱機能仕様

## 概要
TweetHistoryのゴミ箱機能は、ツイートのソフトデリート（論理削除）を実装します。削除されたツイートは完全には削除されず、"bin"タグが付与されて非表示状態になり、後で復元できます。

## 機能詳細

### ソフトデリート
- **削除方法**：ツイートに特殊タグ"bin"を付与
- **メリット**：誤削除からの復旧が可能
- **実装**：タグベースの分類システムを活用

### ゴミ箱画面
- **アクセス**：メイン画面のタブまたはナビゲーションから
- **表示内容**："bin"タグが付いたツイートのみを表示
- **操作**：個別または一括での復元・完全削除

## 操作フロー

### 削除操作
1. メイン画面でツイートを選択
2. 削除ボタンをクリック
3. ツイートに"bin"タグが付与される
4. メイン画面から非表示になる

### 復元操作
1. ゴミ箱画面にアクセス
2. 復元したいツイートを選択
3. 復元ボタンをクリック
4. "bin"タグが削除される
5. メイン画面に再表示される

### 完全削除操作
1. ゴミ箱画面でツイートを選択
2. 完全削除ボタンをクリック
3. 確認ダイアログで承認
4. データベースから物理的に削除される

## UI コンポーネント

### ゴミ箱画面
- **レイアウト**：メイン画面と同様のツイートリスト
- **フィルタ**：ゴミ箱内での検索・ソート機能
- **アクションバー**：復元・完全削除の一括操作

### 削除確認ダイアログ
- **ソフトデリート**：軽量な確認（オプション）
- **完全削除**：強い警告と確認

## 技術実装

### データ構造
```dart
// ツイートの削除状態は"bin"タグの有無で判定
bool isDeleted(Tweet tweet, List<Tag> tags) {
  return tags.any((tag) => 
    tag.name == 'bin' && tag.tweetIds.contains(tweet.id));
}
```

### フィルタリング
- **メイン画面**："bin"タグを持つツイートを除外
- **ゴミ箱画面**："bin"タグを持つツイートのみ表示

### 状態管理
- **Provider**：削除状態の管理とUI更新
- **Repository**：タグ操作を通じたデータ更新

## 関連ファイル
- **画面**：`lib/features/bin/` (予定)
- **UI仕様**：`docs/features/bin/ui/`
- **モデル**：`lib/models/tag.dart`の"bin"タグ機能